# Redo

## redo log buffer

### 重做日志缓冲

#### 大小：默认 8 M

#### 参数设置：Innodb_log_buffer_size

### 重做日志缓冲刷新条件

####  Mastre Thread每隔 1 秒刷新一次

#### 每个事务提交时会刷新

#### 重做日志缓冲池剩余空间小于 1/2 时

## redo log files

### 重做日志介绍

#### 日志文件名

##### 名字：ib_logfile1&ib_logfile2

##### 重做日志文件：记录InnoDB存储引擎的事务日志

##### 栗子：宕机后的恢复，可以保持数据完整性

#### 重做日志文件大小设置

##### 设置太大：有哪些问题？

##### 设置太小：有哪些问题？

##### 分支主题

#### 日志文件组

##### 至少一个组，组内至少2个文件

##### 镜像日志组：如何设置及作用

##### 日志文件大小，循环运行 切换方式

#### 日志文件修改

##### innodb_log_file_size

##### innodb_log_files_in_group

##### innodb_mirrored_bg_groups

##### innodb_log_group_home_dir

### 重做日志文件大小设置

#### 设置太大：有哪些问题？

#### 设置太小：有哪些问题？

#### 分支主题

### 二进制日志和重做日志对比

#### 类别

##### 二进制日志：记录数据库所有相关日志

##### 重做日志：只记录InnoDB存储引擎的事务日志

#### 内容

##### 二进制日志：记录事务的具体操作内容，逻辑日志

##### 重做日志：记录物理页的更改情况

#### 时间

##### 二进制日志：在事务提交的时候进行提交，写一次磁盘

##### 重做日志：在事务过程中，不断有重做日志条目写入重做日志文件

### 重做日志条目

#### 基本条目格式

#### 条目名称的意义：redo_log_type space page_no redo_log_body

### 写入过程图

#### 先写入缓冲，再写入文件

#### 按照512byte = 1扇区，写入、作用，保证写入成功
